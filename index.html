<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Catime - 一款为 Windows 设计的极简、现代、高效的透明计时器与番茄钟，带来可爱风格。">
    <title>Catime - 计时器 & 番茄钟</title>

    <!-- Google 字体 (Poppins 是一个干净的选择) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Noto+Sans+SC:wght@300;400;700&display=swap" rel="stylesheet">

    <!-- Font Awesome (确保使用最新版本) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- AOS (滚动时动画) 库 -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <!-- 自定义样式表 -->
    <link rel="stylesheet" href="style.css">

     <link rel="icon" type="image/png" href="assets/catime.png"> 

</head>
<body>

    <!-- 页头/导航 -->
    <header class="main-header">
        <nav class="container">
            <a href="index.html" class="logo"><img src="assets/catime.png" class="logo-img" alt="Catime Logo"> Catime</a>
            <ul class="nav-links">
                <li><a href="index.html">首页</a></li>
                <li><a href="blog.html">博客</a></li>
                <li><a href="https://mp.weixin.qq.com/s/cE6AcVwx4-HPSFM7RBpxmw" target="_blank" rel="noopener noreferrer">关于</a></li>
                <li><a href="https://github.com/vladelaina/Catime" target="_blank" rel="noopener noreferrer">GitHub</a></li>
                <li><a href="https://github.com/vladelaina/Catime/releases/latest" class="nav-button" target="_blank" rel="noopener noreferrer"><i class="fas fa-download"></i> 下载</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <!-- 英雄区域 -->
        <section class="hero">
            <div class="container hero-content">
                <div class="hero-text" data-aos="fade-right">
                    <h1 class="hero-title">Catime</h1>
                    <p class="hero-subtitle">让时间管理，也萌萌哒~</p>
                    <p class="hero-description">
                        为 Windows 设计的透明计时器 & 番茄钟。
                        像猫咪一样轻盈悬浮，专注每刻，效率加倍！
                    </p>
                    <a href="https://github.com/vladelaina/Catime/releases/latest" class="cta-button primary" target="_blank" rel="noopener noreferrer">
                        <i class="fas fa-heart"></i> 立即获取
                    </a>
                    <a href="https://github.com/vladelaina/Catime" class="cta-button secondary" target="_blank" rel="noopener noreferrer">
                        <i class="fab fa-github"></i> 查看源码
                    </a>
                </div>
                <div class="hero-visual" data-aos="fade-left" data-aos-delay="200">
                    <!-- **视觉元素区 (非常重要!)** -->
                    <!--


                        命名为 catime-visual.png (或你选择的名字) 并放在 images/ 目录下。
                    -->
                     <img src="assets/Showcase.gif" class="hero-screenshot">
                </div>
            </div>
             <!-- 可选: 微妙的背景元素 -->
            <div class="background-shapes">
                <div class="shape shape1"></div>
                <div class="shape shape2"></div>
                <div class="shape shape3"></div>
            </div>
        </section>

        <!-- 特性区域 -->
        <section class="features" id="features">
            <div class="container">
                <h2 class="section-title" data-aos="fade-up">核心特性 ✨</h2>
                <p class="section-subtitle" data-aos="fade-up" data-aos-delay="100">轻巧可爱，功能不少</p>
                <div class="features-grid">
                    <!-- 特性卡片 1 -->
                    <div class="feature-card" data-aos="fade-up" data-aos-delay="200">
                        <div class="feature-icon">
                             <!-- 建议: fa-ghost, fa-low-vision, fa-cat -->
                            <i class="fas fa-ghost"></i>
                        </div>
                        <h3>透明悬浮 & 穿透</h3>
                        <p>像幽灵猫猫一样悬浮，不挡视线，不影响操作，融入桌面背景。</p>
                    </div>
                    <!-- 特性卡片 2 -->
                    <div class="feature-card" data-aos="fade-up" data-aos-delay="300">
                        <div class="feature-icon">
                             <!-- 建议: fa-stopwatch, fa-clock, fa-hourglass-half -->
                            <i class="fas fa-hourglass-half"></i>
                        </div>
                        <h3>灵活计时模式</h3>
                        <p>预设、自定义、番茄钟，多种模式满足你的不同时间管理需求。</p>
                    </div>
                    <!-- 特性卡片 3 -->
                    <div class="feature-card" data-aos="fade-up" data-aos-delay="400">
                        <div class="feature-icon">
                            <!-- 建议: fa-palette, fa-paint-brush, fa-wand-magic-sparkles -->
                            <i class="fas fa-wand-magic-sparkles"></i>
                        </div>
                        <h3>个性化定制</h3>
                        <p>字体、颜色、布局随心搭配，打造专属于你的可爱计时器。</p>
                    </div>
                    <!-- 特性卡片 4 -->
                    <div class="feature-card" data-aos="fade-up" data-aos-delay="500">
                        <div class="feature-icon">
                             <!-- 建议: fa-bolt, fa-rocket, fa-bell -->
                            <i class="fas fa-bell"></i>
                        </div>
                        <h3>智能超时动作</h3>
                        <p>时间到！自动执行任务，如提醒、锁屏、关机等，省心省力。</p>
                    </div>
                     <!-- 特性卡片 5 -->
                     <div class="feature-card" data-aos="fade-up" data-aos-delay="600">
                        <div class="feature-icon">
                             <!-- 建议: fa-feather-alt, fa-leaf, fa-shield-cat -->
                            <i class="fas fa-feather-alt"></i>
                        </div>
                        <h3>轻量高效</h3>
                        <p>C 语言编写，小巧玲珑，资源占用低，运行顺畅不卡顿。</p>
                    </div>
                     <!-- 特性卡片 6 -->
                     <div class="feature-card" data-aos="fade-up" data-aos-delay="700">
                        <div class="feature-icon">
                             <!-- 建议: fa-code-branch, fa-heart, fa-gift -->
                            <i class="fas fa-heart"></i>
                        </div>
                        <h3>开源免费</h3>
                        <p>遵循 Apache 2.0 协议，免费使用，欢迎大家一起贡献代码~</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- GitHub 星星增长曲线 -->
        <section class="github-stats" id="github-stats">
            <div class="container">
                <h2 class="section-title" data-aos="fade-up">开源社区认可 ⭐</h2>
                <p class="section-subtitle" data-aos="fade-up" data-aos-delay="100">获得超过 1.3k 的 GitHub 星标，持续增长中</p>
                
                <div class="github-chart-container" data-aos="zoom-in" data-aos-delay="200">
                    <!-- 使用 Star History 的推荐方法 -->
                    <div id="star-history-chart" style="width: 100%; height: 450px;"></div>
                </div>
            </div>
        </section>

        <!-- 使用场景区域 -->
        <section class="usage-scenarios" id="scenarios">
            <div class="container">
                <h2 class="section-title" data-aos="fade-up">使用场景 🌟</h2>
                <p class="section-subtitle" data-aos="fade-up" data-aos-delay="100">Catime，各种场景的得力助手</p>
                
                <div class="scenarios-container">
                    <!-- 场景1：游戏场景 -->
                    <div class="scenario-card" data-aos="fade-up" data-aos-delay="200">
                        <div class="scenario-visual">
                            <img src="assets/Game scene demonstration.gif" alt="游戏场景下的Catime" class="scenario-img">
                        </div>
                        <div class="scenario-content">
                            <div class="scenario-icon">
                                <i class="fas fa-gamepad"></i>
                            </div>
                            <h3>游戏场景</h3>
                            <p>在游戏中设置计时器，随时关注休息时间。完全不会影响游戏操作，透明悬浮在游戏界面上，让你掌控游戏时间，避免沉迷过度。</p>
                        </div>
                    </div>
                    
                    <!-- 场景2：自动打开软件 -->
                    <div class="scenario-card reverse" data-aos="fade-up" data-aos-delay="300">
                        <div class="scenario-visual">
                            <img src="assets/Open a file or software.png" alt="自动打开软件" class="scenario-img">
                        </div>
                        <div class="scenario-content">
                            <div class="scenario-icon">
                                <i class="fas fa-laptop-code"></i>
                            </div>
                            <h3>自动打开软件</h3>
                            <p>设置完成后自动打开指定程序，告别传统闹钟的重复确认。无论是提醒你查看邮件、打开会议软件，还是打开你最喜欢的应用，一切都能自动完成。</p>
                        </div>
                    </div>
                    
                    <!-- 场景3：PPT演示 -->
                    <div class="scenario-card" data-aos="fade-up" data-aos-delay="400">
                        <div class="scenario-visual">
                            <img src="assets/ppt.jpg" alt="PPT演示时使用" class="scenario-img">
                        </div>
                        <div class="scenario-content">
                            <div class="scenario-icon">
                                <i class="fas fa-person-chalkboard"></i>
                            </div>
                            <h3>PPT演示时使用</h3>
                            <p>演讲和演示时的最佳拍档，透明悬浮在PPT上不影响观众视线，帮助你精确控制演讲时间，演示从此更加从容自信，不再担心超时。</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 号召性行动区域 -->
        <section class="cta-section" data-aos="zoom-in">
            <div class="container">
                <h2>准备好和 Catime 一起管理时间了吗？</h2>
                <p>立刻下载，开启可爱又高效的专注旅程！</p>
                <a href="https://github.com/vladelaina/Catime/releases/latest" class="cta-button primary large" target="_blank" rel="noopener noreferrer">
                    <i class="fas fa-paw"></i> 免费带走 Catime
                </a>
            </div>
        </section>

    </main>

    <!-- 页脚 -->
    <footer class="main-footer">
        <div class="container">
            <p>&copy; 2024 Catime Project by <a href="https://github.com/vladelaina" target="_blank" rel="noopener noreferrer">vladelaina</a></p>
            <p>基于 <a href="https://github.com/vladelaina/Catime/blob/main/LICENSE" target="_blank" rel="noopener noreferrer">Apache 2.0</a> 许可开源</p>
            <p>图标画师: <a href="https://space.bilibili.com/26087398" target="_blank" rel="noopener noreferrer">猫屋敷梨梨Official</a></p>
            <div class="footer-links">
                <a href="https://message.bilibili.com/#/whisper/mid1862395225" target="_blank" rel="noopener noreferrer">问题反馈</a>
                <!-- <a href="#">用户 Q 群</a> -->
                <!-- <a href="#">Discord</a> -->
            </div>
        </div>
    </footer>

    <!-- AOS (滚动时动画) 库 JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({
            duration: 800, // 动画持续时间
            once: true, // 动画是否只发生一次 - 在向下滚动时
            offset: 50, // 从原始触发点偏移的距离 (以像素为单位)
        });
        
        // 为展示图片添加3D倾斜效果
        document.addEventListener('DOMContentLoaded', function() {
            const heroImage = document.querySelector('.hero-screenshot');
            const heroContainer = document.querySelector('.hero-visual');
            const scenarioImages = document.querySelectorAll('.scenario-img');
            const scenarioContainers = document.querySelectorAll('.scenario-visual');
            
            // 处理英雄图片
            if (heroImage && heroContainer) {
                // 最大倾斜角度
                const maxRotateX = 15; 
                const maxRotateY = 20;
                
                // 呼吸效果的定时器
                let breatheTimer = null;
                
                // 当前旋转角度
                let currentRotateX = 0;
                let currentRotateY = 0;
                
                // 设置呼吸效果
                function startBreatheEffect() {
                    if (breatheTimer) return; // 避免重复启动
                    
                    let phase = 0;
                    breatheTimer = setInterval(() => {
                        // 正弦波动的呼吸效果
                        const scale = 1.35 + Math.sin(phase) * 0.03;
                        
                        // 应用变换，结合当前的旋转角度
                        heroImage.style.transform = `scale(${scale}) perspective(1000px) rotateY(${currentRotateY}deg) rotateX(${currentRotateX}deg)`;
                        
                        phase += 0.05;
                    }, 30);
                }

                // 停止呼吸效果
                function stopBreatheEffect() {
                    if (breatheTimer) {
                        clearInterval(breatheTimer);
                        breatheTimer = null;
                    }
                }
                
                // 注意：不在一开始就启动呼吸效果
                
                heroContainer.addEventListener('mousemove', function(e) {
                    // 获取鼠标在元素内的相对位置（0-1）
                    const rect = heroContainer.getBoundingClientRect();
                    const x = (e.clientX - rect.left) / rect.width;
                    const y = (e.clientY - rect.top) / rect.height;
                    
                    // 计算倾斜角度（转换为-maxRotate到maxRotate的范围）
                    currentRotateY = (x - 0.5) * 2 * maxRotateY;
                    currentRotateX = (y - 0.5) * -2 * maxRotateX; // 负号让鼠标在顶部时，图片向上倾斜
                });
                
                // 鼠标离开时恢复原始状态
                heroContainer.addEventListener('mouseleave', function() {
                    stopBreatheEffect(); // 停止呼吸效果
                    currentRotateX = 0;
                    currentRotateY = 0;
                    // 直接设置回初始状态
                    heroImage.style.transform = 'scale(1.3) perspective(1000px)';
                });
                
                // 鼠标进入时准备变换并启动呼吸效果
                heroContainer.addEventListener('mouseenter', function() {
                    heroImage.style.transition = 'transform 0.2s ease-out';
                    startBreatheEffect(); // 启动呼吸效果
                });
                
                // 添加点击效果：按下和回弹
                heroImage.addEventListener('mousedown', function() {
                    // 暂时停止呼吸效果
                    stopBreatheEffect();
                    // 按下效果 - 缩小并轻微下沉，使变化更加柔和
                    heroImage.style.transform = `scale(1.28) perspective(1000px) rotateY(${currentRotateY}deg) rotateX(${currentRotateX}deg) translateZ(-10px)`;
                });
                
                // 鼠标释放或离开时回弹
                document.addEventListener('mouseup', function(event) {
                    if (heroContainer.matches(':hover')) {
                        // 如果鼠标仍在图片上，回弹到悬停状态
                        if (event.target === heroImage || heroImage.contains(event.target)) {
                            // 添加更快速的回弹效果
                            heroImage.style.transition = 'transform 0.15s cubic-bezier(0.34, 1.2, 0.64, 1)';
                            
                            // 重新启动呼吸效果之前，先执行回弹动画，进一步缩短延迟时间
                            setTimeout(() => {
                                // 这里不设置transform，让呼吸效果接管
                                startBreatheEffect();
                            }, 100);
                            
                            // 恢复正常过渡，延迟时间与动画时长匹配
                            setTimeout(() => {
                                heroImage.style.transition = 'transform 0.2s ease-out';
                            }, 150);
                        }
                    } else {
                        // 如果鼠标不在图片上，保持停止呼吸效果的状态
                        heroImage.style.transition = 'transform 0.15s cubic-bezier(0.34, 1.2, 0.64, 1)';
                        heroImage.style.transform = 'scale(1.3) perspective(1000px)';
                        
                        // 恢复正常过渡，延迟时间与动画时长匹配
                        setTimeout(() => {
                            heroImage.style.transition = 'transform 0.2s ease-out';
                        }, 150);
                    }
                });
            }
            
            // 为场景图片添加相同的3D倾斜效果
            if (scenarioImages.length > 0 && scenarioContainers.length > 0) {
                // 为每个场景图片设置动画效果
                scenarioContainers.forEach((container, index) => {
                    const image = scenarioImages[index];
                    
                    // 最大倾斜角度
                    const maxRotateX = 12;
                    const maxRotateY = 18;
                    
                    // 呼吸效果的定时器
                    let breatheTimer = null;
                    
                    // 当前旋转角度
                    let currentRotateX = 0;
                    let currentRotateY = 0;
                    
                    // 设置呼吸效果
                    function startBreatheEffect() {
                        if (breatheTimer) return; // 避免重复启动
                        
                        let phase = 0;
                        breatheTimer = setInterval(() => {
                            // 添加缩放效果，类似于hero图片的呼吸效果
                            const scale = 1.02 + Math.sin(phase) * 0.02;
                            
                            // 应用变换，结合当前的旋转角度和缩放效果
                            image.style.transform = `scale(${scale}) perspective(1000px) rotateY(${currentRotateY}deg) rotateX(${currentRotateX}deg)`;
                            
                            phase += 0.05;
                        }, 30);
                    }

                    // 停止呼吸效果
                    function stopBreatheEffect() {
                        if (breatheTimer) {
                            clearInterval(breatheTimer);
                            breatheTimer = null;
                        }
                    }
                    
                    container.addEventListener('mousemove', function(e) {
                        // 获取鼠标在元素内的相对位置（0-1）
                        const rect = container.getBoundingClientRect();
                        const x = (e.clientX - rect.left) / rect.width;
                        const y = (e.clientY - rect.top) / rect.height;
                        
                        // 计算倾斜角度（转换为-maxRotate到maxRotate的范围）
                        currentRotateY = (x - 0.5) * 2 * maxRotateY;
                        currentRotateX = (y - 0.5) * -2 * maxRotateX; // 负号让鼠标在顶部时，图片向上倾斜
                    });
                    
                    // 鼠标离开时恢复原始状态
                    container.addEventListener('mouseleave', function() {
                        stopBreatheEffect(); // 停止呼吸效果
                        currentRotateX = 0;
                        currentRotateY = 0;
                        // 直接设置回初始状态
                        image.style.transform = 'scale(1) perspective(1000px)';
                    });
                    
                    // 鼠标进入时准备变换并启动呼吸效果
                    container.addEventListener('mouseenter', function() {
                        image.style.transition = 'transform 0.2s ease-out';
                        startBreatheEffect(); // 启动呼吸效果
                    });
                    
                    // 添加点击效果：按下和回弹
                    image.addEventListener('mousedown', function() {
                        // 暂时停止呼吸效果
                        stopBreatheEffect();
                        // 按下效果 - 只添加轻微下沉，不缩放
                        image.style.transform = `scale(0.98) perspective(1000px) rotateY(${currentRotateY}deg) rotateX(${currentRotateX}deg) translateZ(-10px)`;
                    });
                    
                    // 单独为每个场景图片添加鼠标释放事件
                    image.addEventListener('mouseup', function() {
                        // 添加更快速的回弹效果
                        image.style.transition = 'transform 0.15s cubic-bezier(0.34, 1.2, 0.64, 1)';
                        
                        // 重新启动呼吸效果之前，先执行回弹动画
                        setTimeout(() => {
                            startBreatheEffect();
                        }, 100);
                        
                        // 恢复正常过渡，延迟时间与动画时长匹配
                        setTimeout(() => {
                            image.style.transition = 'transform 0.2s ease-out';
                        }, 150);
                    });
                });
            }
        });
    </script>
    
    <!-- Star History Chart -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <script>
        // 在文档加载完成后初始化 Star History Chart
        document.addEventListener('DOMContentLoaded', function() {
            // 检查是否存在图表容器
            const chartContainer = document.getElementById('star-history-chart');
            if (!chartContainer) return;
            
            // 初始化 ECharts 实例
            const chart = echarts.init(chartContainer);
            
            // 配置加载状态
            chart.showLoading({
                text: '加载 GitHub 星星数据中...',
                color: '#7aa2f7',
                textColor: '#414868',
                maskColor: 'rgba(255, 255, 255, 0.8)',
            });
            
            // 首先显示模拟数据，提供即时反馈
            renderFallbackChart(chart, false);
            
            // 然后在后台获取真实数据
            fetch('https://api.star-history.com/svg?repos=vladelaina/Catime&type=Date')
                .then(response => response.text())
                .then(svgData => {
                    // 解析 SVG 数据以提取星星历史
                    const parser = new DOMParser();
                    const svgDoc = parser.parseFromString(svgData, 'image/svg+xml');
                    
                    try {
                        // 提取日期和星星数
                        const paths = svgDoc.querySelectorAll('path[d]');
                        const dataPath = Array.from(paths).find(path => 
                            path.getAttribute('d').includes('M') && 
                            path.getAttribute('d').includes('L') && 
                            !path.getAttribute('d').includes('H')
                        );
                        
                        if (!dataPath) throw new Error('数据路径未找到');
                        
                        const data = dataPath.getAttribute('d')
                            .split('M')[1]
                            .split('L')
                            .map(point => {
                                const [x, y] = point.trim().split(',').map(parseFloat);
                                return [x, y];
                            });
                        
                        // 获取 X 轴和 Y 轴范围
                        const xRange = svgDoc.querySelector('.x').textContent;
                        const yRange = svgDoc.querySelector('.y').textContent;
                        
                        // 解析日期范围
                        const dateMatch = xRange.match(/(\d{4}-\d{2})/g);
                        if (!dateMatch || dateMatch.length < 2) throw new Error('日期范围未找到');
                        
                        const startDate = new Date(dateMatch[0]);
                        const endDate = new Date(dateMatch[dateMatch.length - 1]);
                        const totalDays = (endDate - startDate) / (1000 * 60 * 60 * 24);
                        
                        // 解析星星数范围
                        const starsMatch = yRange.match(/\d+/g);
                        if (!starsMatch || starsMatch.length < 2) throw new Error('星星数范围未找到');
                        
                        const maxStars = parseInt(starsMatch[starsMatch.length - 1]);
                        
                        // 转换数据为 ECharts 格式
                        const chartData = data.map(([x, y]) => {
                            // 将 x 从 SVG 坐标转换为日期
                            const dateOffset = x / svgDoc.querySelector('svg').getAttribute('width') * totalDays;
                            const date = new Date(startDate);
                            date.setDate(date.getDate() + dateOffset);
                            
                            // 格式化日期为 YYYY-MM-DD
                            const formattedDate = date.toISOString().split('T')[0];
                            
                            // 将 y 从 SVG 坐标转换为星星数
                            const height = svgDoc.querySelector('svg').getAttribute('height');
                            const stars = Math.round(maxStars * (1 - y / height));
                            
                            return [formattedDate, stars];
                        });
                        
                        // 配置图表选项
                        const option = {
                            title: {
                                text: 'Catime GitHub 星星增长历史',
                                left: 'center',
                                top: 10,
                                textStyle: {
                                    color: '#414868'
                                }
                            },
                            tooltip: {
                                trigger: 'axis',
                                formatter: function(params) {
                                    const date = new Date(params[0].value[0]);
                                    const formattedDate = date.toISOString().split('T')[0];
                                    return `${formattedDate}: ${params[0].value[1]} 星星`;
                                }
                            },
                            grid: {
                                left: '5%',
                                right: '5%',
                                bottom: '10%',
                                top: '15%',
                                containLabel: true
                            },
                            xAxis: {
                                type: 'time',
                                name: '日期',
                                nameLocation: 'middle',
                                nameGap: 35,
                                axisLabel: {
                                    formatter: '{yyyy}-{MM}-{dd}'
                                },
                                splitLine: {
                                    show: false
                                }
                            },
                            yAxis: {
                                type: 'value',
                                name: '星星数',
                                nameRotate: 90,
                                nameLocation: 'middle',
                                nameGap: 50,
                                max: 1200,
                                min: 0,
                                interval: 200,
                                splitNumber: 6
                            },
                            series: [{
                                name: 'GitHub 星星',
                                type: 'line',
                                smooth: true,
                                symbol: 'circle',
                                symbolSize: 8,
                                sampling: 'average',
                                itemStyle: {
                                    color: '#7aa2f7'
                                },
                                areaStyle: {
                                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                        { offset: 0, color: 'rgba(122, 162, 247, 0.5)' },
                                        { offset: 1, color: 'rgba(122, 162, 247, 0.1)' }
                                    ])
                                },
                                data: chartData.map(item => {
                                    return {
                                        name: item[0],
                                        value: [item[0], item[1]]
                                    };
                                })
                            }]
                        };
                        
                        // 应用配置并隐藏加载状态
                        chart.hideLoading();
                        chart.setOption(option);
                        
                    } catch (error) {
                        console.error('解析 Star History SVG 错误:', error);
                    }
                })
                .catch(error => {
                    console.error('获取 Star History 数据错误:', error);
                });
                
            // 备用图表
            function renderFallbackChart(chart, showFallbackTitle = true) {
                chart.hideLoading();
                
                // 模拟数据 - 使用用户提供的准确日期
                const dateData = [
                    ['2025-02-02', 0],
                    ['2025-03-08', 120],
                    ['2025-03-16', 390],
                    ['2025-03-23', 570],
                    ['2025-03-25', 750],
                    ['2025-03-29', 930],
                    ['2025-04-01', 1110],
                    ['2025-04-07', 1330]
                ];
                
                // 备用图表配置
                const option = {
                    title: {
                        text: showFallbackTitle ? 'Catime GitHub 星星增长历史 (估计数据)' : 'Catime GitHub 星星增长历史',
                        left: 'center',
                        textStyle: {
                            color: '#414868'
                        }
                    },
                    tooltip: {
                        trigger: 'axis',
                        formatter: function(params) {
                            const date = new Date(params[0].value[0]);
                            const formattedDate = date.toISOString().split('T')[0];
                            return `${formattedDate}: ${params[0].value[1]} 星星`;
                        }
                    },
                    grid: {
                        left: '5%',
                        right: '5%',
                        bottom: '10%',
                        top: '15%',
                        containLabel: true
                    },
                    xAxis: {
                        type: 'time',
                        name: '日期',
                        nameLocation: 'middle',
                        nameGap: 35,
                        axisLabel: {
                            formatter: '{yyyy}-{MM}-{dd}'
                        },
                        splitLine: {
                            show: false
                        }
                    },
                    yAxis: {
                        type: 'value',
                        name: '星星数',
                        nameRotate: 90,
                        nameLocation: 'middle',
                        nameGap: 50,
                        splitNumber: 6
                    },
                    series: [{
                        name: 'GitHub 星星',
                        type: 'line',
                        smooth: true,
                        symbol: 'circle',
                        symbolSize: 8,
                        itemStyle: {
                            color: '#7aa2f7'
                        },
                        areaStyle: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                { offset: 0, color: 'rgba(122, 162, 247, 0.5)' },
                                { offset: 1, color: 'rgba(122, 162, 247, 0.1)' }
                            ])
                        },
                        data: dateData.map(item => {
                            return {
                                name: item[0],
                                value: [item[0], item[1]]
                            };
                        })
                    }]
                };
                
                chart.setOption(option);
            }
            
            // 响应窗口调整大小
            window.addEventListener('resize', function() {
                chart.resize();
            });
        });
    </script>

</body>
</html>